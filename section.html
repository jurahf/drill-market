<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	  <title>Drill market</title>

    <!-- Bootstrap -->  
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/site.css" rel="stylesheet">
    <link href="css/sticky-filter.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/modal-slider.css"> <!-- для модального меню -->

    <!-- HTML5 Shim and Respond.js for IE8 support of HTML5 elements and media queries -->  
    <!-- Предупреждение: Respond.js не работает при просмотре страницы через файл:// -->  
    <!--[if lt IE 9]>
 <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script >
 <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
 <![endif]-->  
  </head>
  <body>
    <!-- хедер -->
    <div class="container">
        <div class="navbar header">
          <div class="row">
              <div class="col col-xs-4 col-md-2">
                <a href="./index.html">
                  <img class="logo" src="./icons/Logo.svg" alt="DRILL">
                </a>      
              </div>
  
              <!-- расписанное меню - для большого экрана -->
              <div class="col col-md-8 more-1024">
                <div class="row">
                  <ul class="navbar-nav nav">
                    <li class=""><a class="nav-link yellow-hover" href="./section.html?work=1">Для струйной цементации</a></li>
                    <li class=""><a class="nav-link yellow-hover" href="./section.html?work=2">Для установки анкеров</a></li>
                  </ul>
                </div>
  
                <div class="row">           
                  <ul class="navbar-nav nav">
                    <li class="nav-item"><a class="nav-link yellow-hover" href="./section.html?tool=1">Буровые установки</a></li>
                    <li class="nav-item"><a class="nav-link yellow-hover" href="./section.html?tool=2">Насосы</a></li>
                    <li class="nav-item"><a class="nav-link yellow-hover" href="./section.html?tool=3">Миксерные станции</a></li>
                  </ul>                
                </div>
              </div>
  
              <!-- кнопка меню - для маленького экрана -->
              <div class="col col-xs-offset-7 col-xs-1 col-sm-offset-0 col-sm-4 less-1024 text-center">
                <div class="row margin-top-10">
                  <a data-toggle="modal" data-target="#menuModal"><img src="./icons/burger.svg" alt="Menu" /></a>
                </div>
              </div>         
  
              <div class="col col-xs-4 col-md-2 text-right padding-right-20 more-640">
                <div class="row">
                  <h6>+7 495 226-18-37</h6>
                </div>
                <div class="row">
                  <h6 class="nav-link">info@drill-market.ru</h6>
                </div>
              </div>
          </div>
        </div>
  
        <div class="row less-640">
          <div class="col col-xs-6">
            <h6 class="nav-link">info@drill-market.ru</h6>
          </div>
          <div class="col col-xs-6 text-right">
            <h6>+7 495 226-18-37</h6>
          </div>        
        </div>
      </div>
      

    <!-- разделы -->
    <div class="container margin-top-30">
      <div class="row">
        <!-- фильтры -->
        <div class="col col-xs-3 sticky-filter more-1024">
          
          <div class="row margin-top-50 padding-left-10">
              <button class="none-hover none-focus filter-btn material-input btn btn-default dropdown-toggle" onclick="expandChange('work-combo-btn');" data-toggle="collapse" data-target="#collapseWork" aria-expanded="false" aria-controls="collapseWork">
                Тип работ
                <span id="work-combo-btn" class="combo-btn expanded"></span>
              </button>
              </button>                                  
              <div class="collapse" id="collapseWork">
                <div>
                  <ul class="filter-list">
                    <li id='work-all'><a class="none-hover none-focus" onclick="filterChanged('all', null);">Все типы работ</a></li>
                    <li id='work-1'><a class="none-hover none-focus" onclick="filterChanged('1', null);">Для струйной цементации</a></li>
                    <li id='work-2'><a class="none-hover none-focus" onclick="filterChanged('2', null);">Для установки анкеров</a></li>
                  </ul>
                </div>                
              </div>          
          </div>

          <div class="row margin-top-50 padding-left-10">
            <button class="none-hover none-focus filter-btn material-input btn btn-default dropdown-toggle" onclick="expandChange('tool-combo-btn');" data-toggle="collapse" data-target="#collapseTool" aria-expanded="false" aria-controls="collapseTool">
              Тип оборудования
              <span id="tool-combo-btn" class="combo-btn expanded"></span>
            </button>
            </button>                                  
            <div class="collapse" id="collapseTool">
              <div>
                <ul class="filter-list">
                  <li id='tool-all'><a class="none-hover none-focus" onclick="filterChanged(null, 'all');">Все типы оборудования</a></li>
                  <li id='tool-1'><a class="none-hover none-focus" onclick="filterChanged(null, '1');">Буровые установки</a></li>
                  <li id='tool-2'><a class="none-hover none-focus" onclick="filterChanged(null, '2');">Насосы</a></li>
                  <li id='tool-3'><a class="none-hover none-focus" onclick="filterChanged(null, '3');">Миксерные станции</a></li>
                  <li id='tool-4'><a class="none-hover none-focus" onclick="filterChanged(null, '4');">Сопутствующее оборудование</a></li>
                </ul>
              </div>                
            </div>          
          </div>          

        </div>


        <!-- кнопка фильтров для маленьких экранов -->
        <div class="sticky-filter-btn less-1024">
            <a class="btn btn-default" data-toggle="modal" data-target="#filtersModal">Фильтры</a>
        </div>
          

        <div class="col col-xs-12 col-md-9">
          <!-- сетка с товарами -->
          <!-- TODO: Данные должны тянуться из базы - по параметрам адресной строки-->
          <div class="row margin-top-50">
            <div class="col col-xs-12 col-sm-6">
              <a href="#1">
                <img src="./images/products/Figaro3000.png" class="img-responsive img-product">
              </a>
              <div class="margin-top-30">
                <a class="nav-link yellow-hover" href="./product.html?id=1">Figaro 3000</a>
              </div>
              <div class="with-label margin-top-12">
                <a class="nav-link yellow-hover" href="#">Для струйной цементации</a>
                <a class="separator">/</a>
                <a class="nav-link yellow-hover" href="#">буровые установки</a>
              </div>
              <div class="margin-top-12">
                <a class="separator" href="#">170 000 €</a>
              </div>
            </div>
            
            <div class="col col-xs-12 col-sm-6 margin-top-50-less-640">
              <div class="pull-right-more-640">
                <a href="#1">
                  <img src="./images/products/Figaro1000.png" class="img-responsive img-product">
                </a>
                <div class="margin-top-30">
                  <a class="nav-link yellow-hover" href="./product.html?id=2">Figaro 1000</a>
                </div>
                <div class="with-label margin-top-12">
                  <a class="nav-link yellow-hover" href="#">Для струйной цементации</a>
                  <a class="separator">/</a>
                  <a class="nav-link yellow-hover" href="#">буровые установки</a>
                </div>
                <div class="margin-top-12">
                  <a class="separator" href="#">120 000 €</a>
                </div>
              </div>
            </div>
          </div>

          <!-- еще ряд -->
          <div class="row margin-top-100 margin-top-50-less-640">
            <div class="col col-xs-12 col-sm-6">
              <a href="#1">
                <img src="./images/products/Figaro400.png" class="img-responsive img-product">
              </a>
              <div class="margin-top-30">
                <a class="nav-link yellow-hover" href="./product.html?id=3">Figaro 400</a>
              </div>
              <div class="with-label margin-top-12">
                <a class="nav-link yellow-hover" href="#">Для струйной цементации</a>
                <a class="separator">/</a>
                <a class="nav-link yellow-hover" href="#">буровые установки</a>
              </div>
              <div class="margin-top-12">
                <a class="separator" href="#">3 000 000 руб</a>
              </div>
            </div>

            <div class="col col-xs-12 col-sm-6">
                <div class="pull-right-more-640 margin-top-50-less-640">
              <a href="#1">
                <img src="./images/products/FigaroLafette.png" class="img-responsive img-product">
              </a>
              <div class="margin-top-30">
                <a class="nav-link yellow-hover" href="./product.html?id=4">Figaro Lafette</a>
              </div>
              <div class="with-label margin-top-12">
                <a class="nav-link yellow-hover" href="#">Для струйной цементации</a>
                <a class="separator">/</a>
                <a class="nav-link yellow-hover" href="#">буровые установки</a>
              </div>
              <div class="margin-top-12">
                <a class="separator" href="#">6 700 000 руб</a>
              </div>
            </div>
            </div>
          </div>

          <!-- еще ряд -->
          <!--
            <div class="row margin-top-100 margin-top-50-less-640">
              <div class="col col-xs-12 col-sm-6">
                <a href="#1">
                  <img src="http://placehold.it/300/8bc34a/000000" class="img-responsive img-product">
                </a>
                <div class="margin-top-30">
                  <a class="nav-link yellow-hover" href="#">Краткое наименование</a>
                </div>
                <div class="with-label margin-top-12">
                  <a class="nav-link yellow-hover" href="#">Тип работ</a>
                  <a class="separator">/</a>
                  <a class="nav-link yellow-hover" href="#">Тип оборудования</a>
                </div>
                <div class="margin-top-12">
                  <a class="separator" href="#">ЦЕНА €</a>
                </div>
              </div>

              <div class="col col-xs-12 col-sm-6 margin-top-50-less-640">
                
              </div>            
          </div>
        -->
        </div>
      </div>        
    </div><!-- container -->


 

    <!-- футер -->
    <div class="container margin-top-100">
        <div class="navbar footer">
  
          <div class="row less-640 margin-bottom-50">
            <div class="col col-xs-6">
              <h6 class="nav-link">info@drill-market.ru</h6>
            </div>
            <div class="col col-xs-6 text-right">
              <h6>+7 495 226-18-37</h6>
            </div>        
          </div>
  
          <div class="row">
            <div class="col col-xs-4 col-md-2 more-640">
              <a href="#">
                <img class="logo" src="./icons/Logo.svg" alt="DRILL">
              </a>     
            </div>
  
            <div class="col col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-4 col-md-3">
              <div class="row">
                <h6 class="nav-link">Подписаться на обновления</h6>
              </div>
  
              <div class="row">
                <div class="input-group">
                  <input type="email" class="form-control material-input" id="input-email" placeholder="EMAIL">
                  <span class="input-group-btn material-input">
                    <a href="#" class="nav-link btn btn-secondary"><img src="icons/arrow.svg" alt="" /></a>
                  </span>
                </div>
              </div>
            </div>
  
            <div class="col col-xs-4 col-md-offset-5 col-md-2 text-right padding-right-20 more-640">
              <div class="row">
                <h6>+7 495 226-18-37</h6>
              </div>
              <div class="row">
                <h6 class="nav-link">info@drill-market.ru</h6>
              </div>
            </div>
          </div>
  
          <!-- эмблема для маленьких экранов -->
          <div class="row less-640 margin-top-50 margin-bottom-20">
            <div class="col col-xs-12 text-center">
              <a href="#">
                <img class="logo" src="./icons/Logo.svg" alt="DRILL">
              </a>     
            </div>
          </div>
  
        </div>
      </div>
    
    
      <!-- Menu Modal -->
      <div class="modal left fade" id="menuModal" tabindex="-1" role="dialog" aria-labelledby="menuModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            
            <!-- хедер модального окна -->
            <div class="container">
              <div class="row modal-header">
  
                <div class="col col-xs-6 col-sm-4">
                  <img class="logo" src="./icons/Logo.svg" alt="DRILL">
                </div>
  
                <div class="col col-xs-offset-5 col-xs-1 col-sm-offset-0 col-sm-4 text-center">
                  <div class="row margin-top-10">
                    <a data-direction='left' data-dismiss="modal" aria-label="Close"><img src="icons/close.svg" alt="Close" /></a>
                  </div>
                </div>
  
                <div class="col col-sm-4 text-right padding-right-20 more-640">
                  <div class="row">
                    <h6>+7 495 226-18-37</h6>
                  </div>
                  <div class="row">
                    <h6 class="nav-link">info@drill-market.ru</h6>
                  </div>
                </div>              
  
              </div>
  
              <div class="row less-640">
                <div class="col col-xs-6">
                  <h6 class="nav-link">info@drill-market.ru</h6>
                </div>
                <div class="col col-xs-6 text-right">
                  <h6>+7 495 226-18-37</h6>
                </div>        
              </div>
            </div>
  
            <!-- содержимое модального окна -->
            <div class="container more-640">
              <div class="row">
                  <h1><a class="none yellow-hover" href="./section.html?work=1">Для струйной цементации</a></h1>
                  <h1 class="margin-top-30"><a class="none yellow-hover" href="./section.html?work=2">Для установки анкеров</a></h1>   
  
                  <h1 class="margin-top-50"><a class="none yellow-hover" href="./section.html?tool=1">Буровые установки</a></h1>
                  <h1 class="margin-top-30"><a class="none yellow-hover" href="./section.html?tool=2">Насосы</a></h1>
                  <h1 class="margin-top-30"><a class="none yellow-hover" href="./section.html?tool=3">Миксерные станции</a></h1>
              </div>
            </div>
  
            <div class="container margin-top-40 less-640">
              <div class="row">
                <div class="col col-xs-12">
                  <h4><a class="none yellow-hover" href="./section.html?work=1">Для струйной цементации</a></h4>
                  <h4 class="margin-top-20"><a class="none yellow-hover" href="./section.html?work=2">Для установки анкеров</a></h4>
  
                  <h4 class="margin-top-40"><a class="none yellow-hover" href="./section.html?tool=1">Буровые установки</a></h4>
                  <h4 class="margin-top-20"><a class="none yellow-hover" href="./section.html?tool=2">Насосы</a></h4>
                  <h4 class="margin-top-20"><a class="none yellow-hover" href="./section.html?tool=3">Миксерные станции</a></h4>
                </div>
              </div>
            </div>
  
            <!-- футер модального окна -->
            <div class="container">
              <div class="row site-modal-footer">
  
                  <div class="col col-xs-offset-1 col-xs-10 col-sm-offset-0 col-sm-6">
                    <div class="row">
                      <h6 class="nav-link">Подписаться на обновления</h6>
                    </div>
        
                    <div class="row">
                      <div class="input-group">
                        <input type="email" class="form-control material-input" id="input-email" placeholder="EMAIL">
                        <span class="input-group-btn material-input">
                          <a href="#" class="nav-link btn btn-secondary"><img src="icons/arrow.svg" alt="" /></a>
                        </span>
                      </div>
                    </div>
                  </div>
  
              </div>
            </div>
  
          </div><!-- modal-content -->
        </div><!-- modal-dialog -->
      </div><!-- modal -->


      <!-- модальное окно фильтров -->
      <div class="modal left fade" id="filtersModal" tabindex="-1" role="dialog" aria-labelledby="filtersModalLabel">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              
              <!-- хедер модального окна -->
              <div class="container">
                <div class="row modal-header">
    
                  <div class="col col-xs-6 col-sm-4">
                    <img class="logo" src="./icons/Logo.svg" alt="DRILL">
                  </div>
    
                  <div class="col col-xs-offset-5 col-xs-1 col-sm-offset-0 col-sm-4 text-center">
                    <div class="row margin-top-10">
                      <a onclick="cancelModalFilter();"><img src="icons/close.svg" alt="Close" /></a>
                    </div>
                  </div>
    
                  <div class="col col-sm-4 text-right padding-right-20 more-640">
                    <div class="row">
                      <h6>+7 495 226-18-37</h6>
                    </div>
                    <div class="row">
                      <h6 class="nav-link">info@drill-market.ru</h6>
                    </div>
                  </div>              
    
                </div>
    
                <div class="row less-640">
                  <div class="col col-xs-6">
                    <h6 class="nav-link">info@drill-market.ru</h6>
                  </div>
                  <div class="col col-xs-6 text-right">
                    <h6>+7 495 226-18-37</h6>
                  </div>        
                </div>
              </div>
    
              <!-- содержимое модального окна -->
              <div class="container margin-top-40">
                <div class="row">
                  <div class="col col-xs-12">
                    <h1>Фильтры</h1>
                  </div>
                </div>

                <div class="row margin-top-40">
                  <div class="col col-xs-12 col-sm-6">
                    <h6>ТИП РАБОТ</h6>
                    <hr/>
                    <ul id="modal-work-list" class="filter-list">
                        <li id='modal-work-all'><a class="none-hover none-focus" onclick="modalFilterActiveChanged('all', null);">Все типы работ</a></li>
                        <li id='modal-work-1'><a class="none-hover none-focus" onclick="modalFilterActiveChanged('1', null);">Для струйной цементации</a></li>
                        <li id='modal-work-2'><a class="none-hover none-focus" onclick="modalFilterActiveChanged('2', null);">Для установки анкеров</a></li>
                      </ul>
                  </div>

                  <div class="col col-xs-12 col-sm-6 margin-top-50-less-640">
                    <h6>ТИП ОБОРУДОВАНИЯ</h6>
                    <hr/>
                    <ul id="modal-tool-list" class="filter-list">
                      <li id='modal-tool-all'><a class="none-hover none-focus" onclick="modalFilterActiveChanged(null, 'all');">Все типы оборудования</a></li>
                      <li id='modal-tool-1'><a class="none-hover none-focus" onclick="modalFilterActiveChanged(null, '1');">Буровые установки</a></li>
                      <li id='modal-tool-2'><a class="none-hover none-focus" onclick="modalFilterActiveChanged(null, '2');">Насосы</a></li>
                      <li id='modal-tool-3'><a class="none-hover none-focus" onclick="modalFilterActiveChanged(null, '3');">Миксерные станции</a></li>
                      <li id='modal-tool-4'><a class="none-hover none-focus" onclick="modalFilterActiveChanged(null, '4');">Сопутствующее оборудование</a></li>
                    </ul>
                  </div>                  
                </div>
                
                <div class="row margin-top-50 margin-bottom-40">
                  <div class="col col-xs-6">
                    <a class="btn site-btn-cancel" onclick="cancelModalFilter();">Отменить</a>
                  </div>
                  <div class="col col-xs-6">
                    <a class="btn site-btn-ok" onclick="doFilterFromModal();">Применить</a>
                  </div>
                </div>

              </div>

    
              <!-- футер модального окна -->
              <div class="container">
                <div class="row site-modal-footer">

                </div>
              </div>
    
            </div><!-- modal-content -->
          </div><!-- modal-dialog -->
        </div><!-- modal -->      
	
	
	
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script>
      $(document).ready(function(){
        $('.collapse').collapse('show');

        parseParemeters();

      });


      /// разбирает параметры адресной строки и проставляет значения фильтров
      function parseParemeters() {
        var url = new URL(window.location.href);
        var work = url.searchParams.get("work"); // тип работ
        var tool = url.searchParams.get("tool"); // тип оборудования
        
        var workLi;
        var modalWorkLi;
        switch (work) {
          case '1':
          workLi = $('#work-1');
          modalWorkLi = $('#modal-work-1');
          break;
          case '2':
          workLi = $('#work-2');
          modalWorkLi = $('#modal-work-2');
          break;
          default:
          workLi = $('#work-all');
          modalWorkLi = $('#modal-work-all');
          break;
        }
        
        workLi.addClass('active');
        modalWorkLi.addClass('active');

        var toolLi;
        var modalToolLi;
        switch (tool) {
          case '1':
          toolLi = $('#tool-1');
          modalToolLi = $('#modal-tool-1');
          break;
          case '2':
          toolLi = $('#tool-2');
          modalToolLi = $('#modal-tool-2');
          break;
          case '3':
          toolLi = $('#tool-3');
          modalToolLi = $('#modal-tool-3');
          break;
          case '4':
          toolLi = $('#tool-4');
          modalToolLi = $('#modal-tool-4');
          break;
          default:
          toolLi = $('#tool-all');
          modalToolLi = $('#modal-tool-all');
          break;                                        
        }

        toolLi.addClass('active');
        modalToolLi.addClass('active');
      }

      // перезагружает значения фильтров из адресной строки и закрывает модальное окно
      function cancelModalFilter() {
        $("#modal-work-list li").each((i, e) => {
          $(e).removeClass('active');
        });
        $("#modal-tool-list li").each((i, e) => {
          $(e).removeClass('active');
        });          

        parseParemeters();  // вообще говоря, это излишне, так как на основной странице тоже перезагрузятся фильтры
        $("#filtersModal").modal("hide");
      }

      // применяет фильтры из модального окна
      function doFilterFromModal() {
        var workId = $("#modal-work-list li.active").first().attr('id');
        var toolId = $("#modal-tool-list li.active").first().attr('id');

        var work = workId.substr(workId.lastIndexOf('-') + 1);
        var tool = toolId.substr(toolId.lastIndexOf('-') + 1);
        
        filterChanged(work, tool);
      }

      // просто меняет выбранные фильтры в модальном окне
      function modalFilterActiveChanged(work, tool) {
        if (work) {
          $("#modal-work-list li").each((i, e) => {
            $(e).removeClass('active');
          });

          $('#modal-work-' + work).addClass('active');
        }

        if (tool) {
          $("#modal-tool-list li").each((i, e) => {
            $(e).removeClass('active');
          });

          $('#modal-tool-' + tool).addClass('active');
        }
      }

      // применяет фильтр и переходит на нужную страницу
      function filterChanged(work, tool) {
        var baseUrl = window.location.protocol + '//' + window.location.host + window.location.pathname;
        var url = new URL(window.location.href);
        var baseWork = url.searchParams.get("work"); // тип работ
        var baseTool = url.searchParams.get("tool"); // тип оборудования

        var resultWork = 'all';
        if (baseWork) {
          resultWork = baseWork;
        }
        if (work) {
          resultWork = work;
        }

        var resultTool = 'all';
        if (baseTool) {
          resultTool = baseTool;
        }
        if (tool) {
          resultTool = tool;
        }

        window.location = baseUrl + '?work=' + resultWork + '&tool=' + resultTool;
      }

      // сворачивает или разворачивает элементы
      function expandChange(id) {
        var element = $('#' + id);
        if (element.hasClass('expanded')) {
          element.removeClass('expanded');
        }
        else {
          element.addClass('expanded');
        }
      }



    </script>

  </body>
</html>